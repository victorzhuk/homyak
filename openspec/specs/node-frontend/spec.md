# Node.js & Frontend Specification

## Overview

Update Node.js runtime and all frontend dependencies to latest stable versions, including React 18 â†’ 19 migration.

## Requirements

### FR-1: Node.js Runtime Update
**Given** the current Node.js version is 22.12
**When** the update is applied
**Then** Node.js version is 24.13.0 LTS

### FR-2: React Version Update
**Given** the current React version is 18.3.1
**When** the update is applied
**Then** React version is 19.2.4

### FR-3: Dependency Updates
**Given** the current package.json has outdated dependencies
**When** `yarn upgrade --latest` is run
**Then** all dependencies are updated to latest compatible versions

### FR-4: Build Compatibility
**Given** the frontend builds successfully with current versions
**When** built with updated versions
**Then** the build succeeds without errors

### FR-5: Runtime Compatibility
**Given** the application runs correctly with current versions
**When** run with updated versions
**Then** all functionality works correctly

## Technical Details

### Current State

```json
{
  "dependencies": {
    "bootstrap": "^5.3.3",
    "gsap": "^3.12.5",
    "react": "^18.3.1",
    "react-dom": "^18.3.1"
  },
  "devDependencies": {
    "@eslint/js": "^9.17.0",
    "@types/react": "^18.3.18",
    "@types/react-dom": "^18.3.5",
    "@vitejs/plugin-react": "^4.3.4",
    "eslint": "^9.17.0",
    "eslint-plugin-react-hooks": "^5.0.0",
    "eslint-plugin-react-refresh": "^0.4.16",
    "globals": "^15.14.0",
    "prettier": "^3.4.2",
    "typescript": "~5.6.2",
    "typescript-eslint": "^8.18.2",
    "vite": "^6.0.5"
  }
}
```

### Target State

```json
{
  "dependencies": {
    "bootstrap": "^5.3.3",
    "gsap": "^3.12.7",
    "react": "^19.2.4",
    "react-dom": "^19.2.4"
  },
  "devDependencies": {
    "@eslint/js": "^9.19.0",
    "@types/react": "^19.0.8",
    "@types/react-dom": "^19.0.3",
    "@vitejs/plugin-react": "^4.3.4",
    "eslint": "^9.19.0",
    "eslint-plugin-react-hooks": "^5.1.0",
    "eslint-plugin-react-refresh": "^0.4.18",
    "globals": "^15.14.0",
    "prettier": "^3.4.2",
    "typescript": "~5.7.3",
    "typescript-eslint": "^8.22.0",
    "vite": "^6.0.11"
  }
}
```

### React 19 Breaking Changes to Address

| Change | Impact | Action Required |
|--------|--------|-----------------|
| Refs no longer need `forwardRef` | Low | Can simplify code (optional) |
| `use` hook for promises/context | Low | New feature, not breaking |
| `ref` callback cleanup | Low | Check ref usage patterns |
| JSX transform changes | None | Already using new transform |
| Deprecated APIs removed | Medium | Check for `ReactDOM.render` etc. |

### Files to Modify

| File | Changes |
|------|---------|
| `web/package.json` | Update all version constraints |
| `web/yarn.lock` | Regenerated by `yarn install` |
| `build/prod.Dockerfile` | Update node image to `node:24.13.0-slim` |

### Commands

```bash
cd web

# Update all dependencies to latest
yarn upgrade --latest

# Or manually update package.json then:
yarn install

# Build and verify
yarn build
yarn lint
```

## Acceptance Criteria

- [ ] `node --version` reports v24.13.0 or compatible
- [ ] `yarn install` completes without errors
- [ ] `yarn build` succeeds
- [ ] `yarn lint` passes
- [ ] Application renders correctly in browser
- [ ] No console errors or warnings

## Dependencies

- Node.js 24.13.0 installed locally
- Yarn package manager

## References

- [Node.js 24 LTS](https://nodejs.org/en/about/previous-releases)
- [React 19 Release Notes](https://react.dev/blog/2024/12/05/react-19)
- [React 19 Migration Guide](https://react.dev/blog/2024/04/25/react-19-upgrade-guide)
- [React 19.2 Announcement](https://react.dev/blog/2025/10/01/react-19-2)

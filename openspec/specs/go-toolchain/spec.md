# Go Toolchain Specification

## Overview

Update Go toolchain from 1.23 (EOL) to 1.25.6 with all dependency updates and modern tooling adoption.

## Requirements

### FR-1: Go Version Update
**Given** the current go.mod specifies `go 1.23`
**When** the update is applied
**Then** go.mod specifies `go 1.25.6`

### FR-2: Dependency Updates
**Given** the current dependencies have outdated versions
**When** `go get -u ./...` is run
**Then** all direct and indirect dependencies are updated to latest compatible versions

### FR-3: Go Tool Integration
**Given** golangci-lint is currently invoked via `go run`
**When** the migration is complete
**Then** golangci-lint is managed via `go tool` directive in go.mod

### FR-4: Build Compatibility
**Given** the application builds successfully with Go 1.23
**When** built with Go 1.25.6
**Then** the build succeeds without errors or warnings

### FR-5: Test Compatibility
**Given** all tests pass with Go 1.23
**When** run with Go 1.25.6
**Then** all tests continue to pass

## Technical Details

### Current State

```go
// go.mod
module github.com/victorzhuk/homyak

go 1.23

require (
    github.com/caarlos0/env/v11 v11.3.1
    go.uber.org/zap v1.27.0
    golang.org/x/sync v0.10.0
)
```

### Target State

```go
// go.mod
module github.com/victorzhuk/homyak

go 1.25.6

tool (
    github.com/golangci/golangci-lint/v2/cmd/golangci-lint
)

require (
    github.com/caarlos0/env/v11 v11.3.1        // env config library
    go.uber.org/zap v1.27.0                    // check for updates
    golang.org/x/sync v0.12.0                  // updated
)
```

### Files to Modify

| File | Changes |
|------|---------|
| `go.mod` | Update go directive, add tool directive, update deps |
| `go.sum` | Regenerated by `go mod tidy` |
| `Makefile` | Update lint target to use `go tool` |
| `build/prod.Dockerfile` | Update builder image to `golang:1.25.6-bookworm` |

### Commands

```bash
# Update Go version
go mod edit -go=1.25.6

# Update all dependencies
go get -u ./...

# Add golangci-lint as tool
go get -tool github.com/golangci/golangci-lint/v2/cmd/golangci-lint@latest

# Clean up
go mod tidy

# Verify
go build ./...
go test ./...
```

## Acceptance Criteria

- [ ] `go version` reports 1.25.6 or compatible
- [ ] `go mod tidy` produces no changes
- [ ] `go build ./...` succeeds
- [ ] `go test ./...` passes
- [ ] `go tool golangci-lint --version` works
- [ ] No deprecated API usage warnings

## Dependencies

- Go 1.25.6 installed locally
- Access to Go module proxy

## References

- [Go 1.25 Release Notes](https://go.dev/doc/go1.25)
- [Go 1.25.6 Security Advisory](https://groups.google.com/g/golang-announce/c/...)
- [Go Tool Directive](https://go.dev/ref/mod#go-mod-file-tool)
